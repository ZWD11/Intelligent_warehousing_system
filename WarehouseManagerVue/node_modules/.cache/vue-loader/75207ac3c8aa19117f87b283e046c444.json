{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue","mtime":1719904299799},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1720022418374},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkN1cnJlbnRMb2NhdGlvbiIsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgICAgICBsb2NhdGlvbjogJycNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZ2V0Q3VycmVudExvY2F0aW9uKCkgew0KICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgew0KICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oDQogICAgICAgICAgICAgICAgICAgIChwb3NpdGlvbikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF0aXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlcnNlR2VvY29kZShsYXRpdHVkZSwgbG9uZ2l0dWRlKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVycm9yLlBFUk1JU1NJT05fREVOSUVEOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+eUqOaIt+aLkue7neS6huWcsOeQhuS9jee9ruivt+axguOAgic7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZXJyb3IuUE9TSVRJT05fVU5BVkFJTEFCTEU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn5L2N572u5L+h5oGv5LiN5Y+v55So44CCJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBlcnJvci5USU1FT1VUOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+ivt+axguiOt+WPlueUqOaIt+S9jee9rui2heaXtuOAgic7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn6I635Y+W5L2N572u5L+h5oGv5pe25Y+R55Sf5pyq55+l6ZSZ6K+v44CCJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn5rWP6KeI5Zmo5LiN5pSv5oyB5Zyw55CG5L2N572u6I635Y+WJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcmV2ZXJzZUdlb2NvZGUobGF0aXR1ZGUsIGxvbmdpdHVkZSkgew0KICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gJ2M1YTgzN2MwN2M0NDQxZWFiMzQzZjNiZTEyMTJmMDZhJzsgDQogICAgICAgICAgICBjb25zdCBhcGlVcmwgPSBgaHR0cHM6Ly9hcGkub3BlbmNhZ2VkYXRhLmNvbS9nZW9jb2RlL3YxL2pzb24/cT0ke2xhdGl0dWRlfSske2xvbmdpdHVkZX0ma2V5PSR7YXBpS2V5fSZsYW5ndWFnZT16aC1DTmA7DQoNCiAgICAgICAgICAgIGF4aW9zLmdldChhcGlVcmwpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSByZXN1bHRzWzBdLmZvcm1hdHRlZDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn5peg5rOV6I635Y+W5b2T5YmN5L2N572u55qE5Z+O5biC5L+h5oGv44CCJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJVc2VyTG9jYXRpb24iLCB0aGlzLmxvY2F0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCflj43lkJHlnLDnkIbnvJbnoIHlpLHotKXvvJonLCBlcnJvcik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn6I635Y+W5L2N572u5L+h5oGv5aSx6LSl44CCJzsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKTsNCiAgICB9DQp9Ow0K"},{"version":3,"sources":["CurrentLocation.vue"],"names":[],"mappings":";AAcA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CurrentLocation.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div style=\"line-height:1.75\">\r\n        <span>当前登录位置信息：\r\n            <template v-if=\"loading\">\r\n                加载中 <i class=\"el-icon-loading\"></i>\r\n            </template>\r\n            <template v-else>\r\n                <br>{{ location }}\r\n            </template>\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"CurrentLocation\",\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            location: ''\r\n        };\r\n    },\r\n    methods: {\r\n        getCurrentLocation() {\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position) => {\r\n                        const latitude = position.coords.latitude;\r\n                        const longitude = position.coords.longitude;\r\n                        this.reverseGeocode(latitude, longitude);\r\n                    },\r\n                    (error) => {\r\n                        switch (error.code) {\r\n                            case error.PERMISSION_DENIED:\r\n                                this.location = '用户拒绝了地理位置请求。';\r\n                                break;\r\n                            case error.POSITION_UNAVAILABLE:\r\n                                this.location = '位置信息不可用。';\r\n                                break;\r\n                            case error.TIMEOUT:\r\n                                this.location = '请求获取用户位置超时。';\r\n                                break;\r\n                            default:\r\n                                this.location = '获取位置信息时发生未知错误。';\r\n                                break;\r\n                        }\r\n                        console.error(error);\r\n                    }\r\n                );\r\n            } else {\r\n                this.location = '浏览器不支持地理位置获取';\r\n            }\r\n        },\r\n        reverseGeocode(latitude, longitude) {\r\n            const apiKey = 'c5a837c07c4441eab343f3be1212f06a'; \r\n            const apiUrl = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=${apiKey}&language=zh-CN`;\r\n\r\n            axios.get(apiUrl)\r\n                .then(response => {\r\n                    const results = response.data.results;\r\n                    if (results && results.length > 0) {\r\n                        this.location = results[0].formatted;\r\n                    } else {\r\n                        this.location = '无法获取当前位置的城市信息。';\r\n                    }\r\n                    sessionStorage.setItem(\"UserLocation\", this.location);\r\n                    this.loading = false;\r\n                })\r\n                .catch(error => {\r\n                    console.error('反向地理编码失败：', error);\r\n                    this.location = '获取位置信息失败。';\r\n                });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCurrentLocation();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nspan {\r\n    padding: 30px;\r\n    font-size: 25px;\r\n    color: orange;\r\n}\r\n</style>\r\n"]}]}