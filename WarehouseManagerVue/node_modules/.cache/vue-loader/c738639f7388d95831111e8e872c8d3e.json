{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\record\\RecordManage.vue?vue&type=style&index=0&id=00ed4358&scoped=true&lang=css&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\record\\RecordManage.vue","mtime":1719912080800},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1677927573745},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1677927577942},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1677927575422},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudGFibGUgew0KICAgbWF4LWhlaWdodDogMzIwcHg7IA0KICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgICB3aWR0aDogNXB4OyANCiAgfQ0KDQogICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsNCiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgDQogIH0NCg0KICAmOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7DQogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpOyANCiAgICBib3JkZXItcmFkaXVzOiA1cHg7IA0KICB9DQoNCiAgJjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgfQ0KfQ0KLnJlY29yZC1wYWdlIHsNCiAgb3ZlcmZsb3c6IGF1dG87DQogIGhlaWdodDogNjEwcHg7DQogICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgICB3aWR0aDogMDsgDQogIH0NCg0KICAmOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IA0KICB9DQoNCiAgJjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTsgDQogICAgYm9yZGVyLXJhZGl1czogNXB4OyANCiAgfQ0KDQogICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMik7DQogIH0NCn0NCi5jaGFydC1jb250YWluZXIgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIG1hcmdpbi10b3A6IDUwcHg7DQogIG1hcmdpbi1sZWZ0OiA1JTsNCn0NCg=="},{"version":3,"sources":["RecordManage.vue"],"names":[],"mappings":";AAmTA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecordManage.vue","sourceRoot":"src/components/record","sourcesContent":["<template>\r\n    <div class=\"record-page\">\r\n      <div style=\"margin-bottom: 5px\">\r\n        <el-input\r\n          v-model=\"name\"\r\n          placeholder=\"请输入物品名\"\r\n          suffix-icon=\"el-icon-a-042\"\r\n          style=\"width: 200px\"\r\n          @keyup.enter.native=\"loadPost\"\r\n        ></el-input>\r\n        <el-select\r\n          v-model=\"storage\"\r\n          placeholder=\"请选择仓库\"\r\n          style=\"margin-left: 5px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in storageData\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"goodstype\"\r\n          placeholder=\"请选择分类\"\r\n          style=\"margin-left: 5px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in goodstypeData\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n        <el-button\r\n          type=\"primary\"\r\n          style=\"margin-left: 5px; font-size: 18px\"\r\n          @click=\"loadPost\"\r\n        >\r\n          查询</el-button\r\n        >\r\n        <el-button\r\n          type=\"warning\"\r\n          style=\"font-size: 18px\"\r\n          @click=\"resetParam\"\r\n        >\r\n          重置</el-button\r\n        >\r\n      </div>\r\n      <div class=\"table-pagination-container\">\r\n        <div class=\"table\">\r\n            <el-table\r\n            :data=\"tableData\"\r\n            :header-cell-style=\"{ background: '#f2f5fc', color: '#555555' }\"\r\n            border\r\n            >\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"60\"></el-table-column>\r\n            <el-table-column prop=\"goodsname\" label=\"物品名\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"storagename\" label=\"仓库\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"goodstypename\" label=\"分类\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"adminname\" label=\"操作人\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"username\" label=\"申请人\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"count\" label=\"数量\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"createtime\" label=\"操作时间\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"remark\" label=\"备注\"></el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <div class=\"pagination-size\" style=\"margin-top: 5px; margin-left: 30%;\">\r\n            <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"pageNum\"\r\n            :page-sizes=\"[5, 10, 20, 30]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n            ></el-pagination>\r\n        </div>\r\n        <div class=\"chart-container\">\r\n            <div id=\"chart-in\" style=\"width: 600px; height: 400px;\"></div>\r\n            <div id=\"chart-out\" style=\"width: 600px; height: 400px;\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"RecordManage\",\r\n  data() {\r\n    return {\r\n      user: JSON.parse(sessionStorage.getItem(\"CurUser\")),\r\n      storageData: [],\r\n      goodstypeData: [],\r\n      tableData: [],\r\n      pageSize: 10,\r\n      pageNum: 1,\r\n      total: 0,\r\n      name: \"\",\r\n      storage: \"\",\r\n      goodstype: \"\",\r\n      chartIn: null,\r\n      chartOut: null,\r\n      centerDialogVisible: false,\r\n      form: {\r\n        id: \"\",\r\n        name: \"\",\r\n        storage: \"\",\r\n        goodstype: \"\",\r\n        count: \"\",\r\n        remark: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    formatStorage(row) {\r\n      let temp = this.storageData.find((item) => {\r\n        return item.id == row.storage;\r\n      });\r\n\r\n      return temp && temp.name;\r\n    },\r\n    formatGoodstype(row) {\r\n      let temp = this.goodstypeData.find((item) => {\r\n        return item.id == row.goodstype;\r\n      });\r\n\r\n      return temp && temp.name;\r\n    },\r\n    resetForm() {\r\n      this.$refs.form.resetFields();\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageNum = 1;\r\n      this.pageSize = val;\r\n      this.loadPost();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.pageNum = val;\r\n      this.loadPost();\r\n    },\r\n    resetParam() {\r\n      this.name = \"\";\r\n      this.storage = \"\";\r\n      this.goodstype = \"\";\r\n    },\r\n    loadStorage() {\r\n      this.$axios\r\n        .get(this.$httpUrl + \"/storage/list\")\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.storageData = res.data;\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    loadGoodstype() {\r\n      this.$axios\r\n        .get(this.$httpUrl + \"/goodstype/list\")\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.goodstypeData = res.data;\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    loadPost() {\r\n      this.$axios\r\n        .post(this.$httpUrl + \"/record/listPage\", {\r\n          pageSize: this.pageSize,\r\n          pageNum: this.pageNum,\r\n          param: {\r\n            name: this.name,\r\n            goodstype: this.goodstype + \"\",\r\n            storage: this.storage + \"\",\r\n            roleId: this.user.roleId + \"\",\r\n            userId: this.user.id + \"\",\r\n          },\r\n        })\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.tableData = res.data;\r\n            this.total = res.total;\r\n            this.createChart();\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    createChart() {\r\n      if (!this.chartIn) {\r\n        this.chartIn = echarts.init(document.getElementById('chart-in'));\r\n      }\r\n      if (!this.chartOut) {\r\n        this.chartOut = echarts.init(document.getElementById('chart-out'));\r\n      }\r\n\r\n      const dataIn = {};\r\n      const dataOut = {};\r\n      this.tableData.forEach(item => {\r\n        if (item.count > 0) {\r\n          if (!dataIn[item.goodsname]) {\r\n            dataIn[item.goodsname] = 0;\r\n          }\r\n          dataIn[item.goodsname] += item.count;\r\n        } else {\r\n          if (!dataOut[item.goodsname]) {\r\n            dataOut[item.goodsname] = 0;\r\n          }\r\n          dataOut[item.goodsname] += Math.abs(item.count);\r\n        }\r\n      });\r\n\r\n      const chartDataIn = Object.keys(dataIn).map(key => ({\r\n        name: key,\r\n        value: dataIn[key]\r\n      }));\r\n      const chartDataOut = Object.keys(dataOut).map(key => ({\r\n        name: key,\r\n        value: dataOut[key]\r\n      }));\r\n\r\n      const optionIn = {\r\n        title: {\r\n          text: '入库',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left'\r\n        },\r\n        series: [\r\n          {\r\n            name: '入库数量',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartDataIn,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n\r\n      const optionOut = {\r\n        title: {\r\n          text: '出库',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left'\r\n        },\r\n        series: [\r\n          {\r\n            name: '出库数量',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartDataOut,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n\r\n      this.chartIn.setOption(optionIn);\r\n      this.chartOut.setOption(optionOut);\r\n    }\r\n  },\r\n  beforeMount() {\r\n    this.loadStorage();\r\n    this.loadGoodstype();\r\n    this.loadPost();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.table {\r\n   max-height: 320px; \r\n   overflow-y: auto;\r\n   &::-webkit-scrollbar {\r\n    width: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: rgba(0, 0, 0, 0.1); \r\n    border-radius: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n.record-page {\r\n  overflow: auto;\r\n  height: 610px;\r\n  &::-webkit-scrollbar {\r\n    width: 0; \r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: rgba(0, 0, 0, 0.1); \r\n    border-radius: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n.chart-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 50px;\r\n  margin-left: 5%;\r\n}\r\n</style>"]}]}