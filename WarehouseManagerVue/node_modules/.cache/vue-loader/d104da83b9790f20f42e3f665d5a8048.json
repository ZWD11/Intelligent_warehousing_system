{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue?vue&type=style&index=0&id=4f73ab4e&scoped=true&lang=css&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue","mtime":1719904299799},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1677927573745},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1677927577942},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1677927575422},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpzcGFuIHsNCiAgICBwYWRkaW5nOiAzMHB4Ow0KICAgIGZvbnQtc2l6ZTogMjVweDsNCiAgICBjb2xvcjogb3JhbmdlOw0KfQ0K"},{"version":3,"sources":["CurrentLocation.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;AACA","file":"CurrentLocation.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div style=\"line-height:1.75\">\r\n        <span>当前登录位置信息：\r\n            <template v-if=\"loading\">\r\n                加载中 <i class=\"el-icon-loading\"></i>\r\n            </template>\r\n            <template v-else>\r\n                <br>{{ location }}\r\n            </template>\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"CurrentLocation\",\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            location: ''\r\n        };\r\n    },\r\n    methods: {\r\n        getCurrentLocation() {\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position) => {\r\n                        const latitude = position.coords.latitude;\r\n                        const longitude = position.coords.longitude;\r\n                        this.reverseGeocode(latitude, longitude);\r\n                    },\r\n                    (error) => {\r\n                        switch (error.code) {\r\n                            case error.PERMISSION_DENIED:\r\n                                this.location = '用户拒绝了地理位置请求。';\r\n                                break;\r\n                            case error.POSITION_UNAVAILABLE:\r\n                                this.location = '位置信息不可用。';\r\n                                break;\r\n                            case error.TIMEOUT:\r\n                                this.location = '请求获取用户位置超时。';\r\n                                break;\r\n                            default:\r\n                                this.location = '获取位置信息时发生未知错误。';\r\n                                break;\r\n                        }\r\n                        console.error(error);\r\n                    }\r\n                );\r\n            } else {\r\n                this.location = '浏览器不支持地理位置获取';\r\n            }\r\n        },\r\n        reverseGeocode(latitude, longitude) {\r\n            const apiKey = 'c5a837c07c4441eab343f3be1212f06a'; \r\n            const apiUrl = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=${apiKey}&language=zh-CN`;\r\n\r\n            axios.get(apiUrl)\r\n                .then(response => {\r\n                    const results = response.data.results;\r\n                    if (results && results.length > 0) {\r\n                        this.location = results[0].formatted;\r\n                    } else {\r\n                        this.location = '无法获取当前位置的城市信息。';\r\n                    }\r\n                    sessionStorage.setItem(\"UserLocation\", this.location);\r\n                    this.loading = false;\r\n                })\r\n                .catch(error => {\r\n                    console.error('反向地理编码失败：', error);\r\n                    this.location = '获取位置信息失败。';\r\n                });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCurrentLocation();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nspan {\r\n    padding: 30px;\r\n    font-size: 25px;\r\n    color: orange;\r\n}\r\n</style>\r\n"]}]}