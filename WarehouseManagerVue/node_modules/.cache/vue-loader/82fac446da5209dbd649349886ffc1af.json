{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\record\\RecordManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\record\\RecordManage.vue","mtime":1719920830306},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1720022418374},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZWNvcmRNYW5hZ2UiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB1c2VyOiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIkN1clVzZXIiKSksDQogICAgICBzdG9yYWdlRGF0YTogW10sDQogICAgICBnb29kc3R5cGVEYXRhOiBbXSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICBwYWdlU2l6ZTogMTAsDQogICAgICBwYWdlTnVtOiAxLA0KICAgICAgdG90YWw6IDAsDQogICAgICBuYW1lOiAiIiwNCiAgICAgIHN0b3JhZ2U6ICIiLA0KICAgICAgZ29vZHN0eXBlOiAiIiwNCiAgICAgIGNoYXJ0SW46IG51bGwsDQogICAgICBjaGFydE91dDogbnVsbCwNCiAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZm9ybTogew0KICAgICAgICBpZDogIiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBzdG9yYWdlOiAiIiwNCiAgICAgICAgZ29vZHN0eXBlOiAiIiwNCiAgICAgICAgY291bnQ6ICIiLA0KICAgICAgICByZW1hcms6ICIiLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZm9ybWF0U3RvcmFnZShyb3cpIHsNCiAgICAgIGxldCB0ZW1wID0gdGhpcy5zdG9yYWdlRGF0YS5maW5kKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmlkID09IHJvdy5zdG9yYWdlOw0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiB0ZW1wICYmIHRlbXAubmFtZTsNCiAgICB9LA0KICAgIGZvcm1hdEdvb2RzdHlwZShyb3cpIHsNCiAgICAgIGxldCB0ZW1wID0gdGhpcy5nb29kc3R5cGVEYXRhLmZpbmQoKGl0ZW0pID0+IHsNCiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT0gcm93Lmdvb2RzdHlwZTsNCiAgICAgIH0pOw0KDQogICAgICByZXR1cm4gdGVtcCAmJiB0ZW1wLm5hbWU7DQogICAgfSwNCiAgICByZXNldEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICB9LA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKTsNCiAgICAgIHRoaXMucGFnZU51bSA9IDE7DQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOw0KICAgICAgdGhpcy5sb2FkUG9zdCgpOw0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWApOw0KICAgICAgdGhpcy5wYWdlTnVtID0gdmFsOw0KICAgICAgdGhpcy5sb2FkUG9zdCgpOw0KICAgIH0sDQogICAgcmVzZXRQYXJhbSgpIHsNCiAgICAgIHRoaXMubmFtZSA9ICIiOw0KICAgICAgdGhpcy5zdG9yYWdlID0gIiI7DQogICAgICB0aGlzLmdvb2RzdHlwZSA9ICIiOw0KICAgIH0sDQogICAgbG9hZFN0b3JhZ2UoKSB7DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAuZ2V0KHRoaXMuJGh0dHBVcmwgKyAiL3N0b3JhZ2UvbGlzdCIpDQogICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5kYXRhKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLnN0b3JhZ2VEYXRhID0gcmVzLmRhdGE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFsZXJ0KCLojrflj5bmlbDmja7lpLHotKUiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgbG9hZEdvb2RzdHlwZSgpIHsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQodGhpcy4kaHR0cFVybCArICIvZ29vZHN0eXBlL2xpc3QiKQ0KICAgICAgICAudGhlbigocmVzKSA9PiByZXMuZGF0YSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5nb29kc3R5cGVEYXRhID0gcmVzLmRhdGE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFsZXJ0KCLojrflj5bmlbDmja7lpLHotKUiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgbG9hZFBvc3QoKSB7DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAucG9zdCh0aGlzLiRodHRwVXJsICsgIi9yZWNvcmQvbGlzdFBhZ2UiLCB7DQogICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsDQogICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLA0KICAgICAgICAgIHBhcmFtOiB7DQogICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsDQogICAgICAgICAgICBnb29kc3R5cGU6IHRoaXMuZ29vZHN0eXBlICsgIiIsDQogICAgICAgICAgICBzdG9yYWdlOiB0aGlzLnN0b3JhZ2UgKyAiIiwNCiAgICAgICAgICAgIHJvbGVJZDogdGhpcy51c2VyLnJvbGVJZCArICIiLA0KICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuaWQgKyAiIiwNCiAgICAgICAgICB9LA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiByZXMuZGF0YSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7DQogICAgICAgICAgICB0aGlzLmNyZWF0ZUNoYXJ0KCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFsZXJ0KCLojrflj5bmlbDmja7lpLHotKUiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgY3JlYXRlQ2hhcnQoKSB7DQogICAgICBpZiAoIXRoaXMuY2hhcnRJbikgew0KICAgICAgICB0aGlzLmNoYXJ0SW4gPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0LWluJykpOw0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmNoYXJ0T3V0KSB7DQogICAgICAgIHRoaXMuY2hhcnRPdXQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0LW91dCcpKTsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgZGF0YUluID0ge307DQogICAgICBjb25zdCBkYXRhT3V0ID0ge307DQogICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5jb3VudCA+IDApIHsNCiAgICAgICAgICBpZiAoIWRhdGFJbltpdGVtLmdvb2RzbmFtZV0pIHsNCiAgICAgICAgICAgIGRhdGFJbltpdGVtLmdvb2RzbmFtZV0gPSAwOw0KICAgICAgICAgIH1lbHNle30NCiAgICAgICAgICBkYXRhSW5baXRlbS5nb29kc25hbWVdICs9IGl0ZW0uY291bnQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKCFkYXRhT3V0W2l0ZW0uZ29vZHNuYW1lXSkgew0KICAgICAgICAgICAgZGF0YU91dFtpdGVtLmdvb2RzbmFtZV0gPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBkYXRhT3V0W2l0ZW0uZ29vZHNuYW1lXSArPSBNYXRoLmFicyhpdGVtLmNvdW50KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAgICAgIGNvbnN0IGNoYXJ0RGF0YUluID0gT2JqZWN0LmtleXMoZGF0YUluKS5tYXAoa2V5ID0+ICh7DQogICAgICAgIG5hbWU6IGtleSwNCiAgICAgICAgdmFsdWU6IGRhdGFJbltrZXldDQogICAgICB9KSk7DQogICAgICBjb25zdCBjaGFydERhdGFPdXQgPSBPYmplY3Qua2V5cyhkYXRhT3V0KS5tYXAoa2V5ID0+ICh7DQogICAgICAgIG5hbWU6IGtleSwNCiAgICAgICAgdmFsdWU6IGRhdGFPdXRba2V5XQ0KICAgICAgfSkpOw0KDQogICAgICBjb25zdCBvcHRpb25JbiA9IHsNCiAgICAgICAgdGl0bGU6IHsNCiAgICAgICAgICB0ZXh0OiAn5YWl5bqTJywNCiAgICAgICAgICBsZWZ0OiAnY2VudGVyJw0KICAgICAgICB9LA0KICAgICAgICB0b29sdGlwOiB7DQogICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nDQogICAgICAgIH0sDQogICAgICAgIGxlZ2VuZDogew0KICAgICAgICAgIG9yaWVudDogJ3ZlcnRpY2FsJywNCiAgICAgICAgICBsZWZ0OiAnbGVmdCcNCiAgICAgICAgfSwNCiAgICAgICAgc2VyaWVzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbmFtZTogJ+WFpeW6k+aVsOmHjycsDQogICAgICAgICAgICB0eXBlOiAncGllJywNCiAgICAgICAgICAgIHJhZGl1czogJzUwJScsDQogICAgICAgICAgICBkYXRhOiBjaGFydERhdGFJbiwNCiAgICAgICAgICAgIGVtcGhhc2lzOiB7DQogICAgICAgICAgICAgIGl0ZW1TdHlsZTogew0KICAgICAgICAgICAgICAgIHNoYWRvd0JsdXI6IDEwLA0KICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsDQogICAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuNSknDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH07DQoNCiAgICAgIGNvbnN0IG9wdGlvbk91dCA9IHsNCiAgICAgICAgdGl0bGU6IHsNCiAgICAgICAgICB0ZXh0OiAn5Ye65bqTJywNCiAgICAgICAgICBsZWZ0OiAnY2VudGVyJw0KICAgICAgICB9LA0KICAgICAgICB0b29sdGlwOiB7DQogICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nDQogICAgICAgIH0sDQogICAgICAgIGxlZ2VuZDogew0KICAgICAgICAgIG9yaWVudDogJ3ZlcnRpY2FsJywNCiAgICAgICAgICBsZWZ0OiAnbGVmdCcNCiAgICAgICAgfSwNCiAgICAgICAgc2VyaWVzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbmFtZTogJ+WHuuW6k+aVsOmHjycsDQogICAgICAgICAgICB0eXBlOiAncGllJywNCiAgICAgICAgICAgIHJhZGl1czogJzUwJScsDQogICAgICAgICAgICBkYXRhOiBjaGFydERhdGFPdXQsDQogICAgICAgICAgICBlbXBoYXNpczogew0KICAgICAgICAgICAgICBpdGVtU3R5bGU6IHsNCiAgICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCwNCiAgICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiAwLA0KICAgICAgICAgICAgICAgIHNoYWRvd0NvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjUpJw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9Ow0KDQogICAgICB0aGlzLmNoYXJ0SW4uc2V0T3B0aW9uKG9wdGlvbkluKTsNCiAgICAgIHRoaXMuY2hhcnRPdXQuc2V0T3B0aW9uKG9wdGlvbk91dCk7DQogICAgfQ0KICB9LA0KICBiZWZvcmVNb3VudCgpIHsNCiAgICB0aGlzLmxvYWRTdG9yYWdlKCk7DQogICAgdGhpcy5sb2FkR29vZHN0eXBlKCk7DQogICAgdGhpcy5sb2FkUG9zdCgpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["RecordManage.vue"],"names":[],"mappings":";AAyFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecordManage.vue","sourceRoot":"src/components/record","sourcesContent":["<template>\r\n    <div class=\"record-page\">\r\n      <div style=\"margin-bottom: 5px\">\r\n        <el-input\r\n          v-model=\"name\"\r\n          placeholder=\"请输入物品名\"\r\n          suffix-icon=\"el-icon-a-042\"\r\n          style=\"width: 200px\"\r\n          @keyup.enter.native=\"loadPost\"\r\n        ></el-input>\r\n        <el-select\r\n          v-model=\"storage\"\r\n          placeholder=\"请选择仓库\"\r\n          style=\"margin-left: 5px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in storageData\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"goodstype\"\r\n          placeholder=\"请选择分类\"\r\n          style=\"margin-left: 5px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in goodstypeData\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n        <el-button\r\n          type=\"primary\"\r\n          style=\"margin-left: 5px; font-size: 18px\"\r\n          @click=\"loadPost\"\r\n        >\r\n          查询</el-button\r\n        >\r\n        <el-button\r\n          type=\"warning\"\r\n          style=\"font-size: 18px\"\r\n          @click=\"resetParam\"\r\n        >\r\n          重置</el-button\r\n        >\r\n      </div>\r\n      <div class=\"table-pagination-container\">\r\n        <div class=\"table\">\r\n            <el-table\r\n            :data=\"tableData\"\r\n            :header-cell-style=\"{ background: '#f2f5fc', color: '#555555' }\"\r\n            border\r\n            >\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"60\"></el-table-column>\r\n            <el-table-column prop=\"goodsname\" label=\"物品名\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"storagename\" label=\"仓库\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"goodstypename\" label=\"分类\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"adminname\" label=\"操作人\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"username\" label=\"申请人\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"count\" label=\"数量\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"createtime\" label=\"操作时间\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"remark\" label=\"备注\"></el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <div class=\"pagination-size\" style=\"margin-top: 5px; margin-left: 30%;\">\r\n            <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"pageNum\"\r\n            :page-sizes=\"[5, 10, 20, 30]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n            ></el-pagination>\r\n        </div>\r\n        <div class=\"chart-container\">\r\n            <div id=\"chart-in\" style=\"width: 600px; height: 400px;\"></div>\r\n            <div id=\"chart-out\" style=\"width: 600px; height: 400px;\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"RecordManage\",\r\n  data() {\r\n    return {\r\n      user: JSON.parse(sessionStorage.getItem(\"CurUser\")),\r\n      storageData: [],\r\n      goodstypeData: [],\r\n      tableData: [],\r\n      pageSize: 10,\r\n      pageNum: 1,\r\n      total: 0,\r\n      name: \"\",\r\n      storage: \"\",\r\n      goodstype: \"\",\r\n      chartIn: null,\r\n      chartOut: null,\r\n      centerDialogVisible: false,\r\n      form: {\r\n        id: \"\",\r\n        name: \"\",\r\n        storage: \"\",\r\n        goodstype: \"\",\r\n        count: \"\",\r\n        remark: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    formatStorage(row) {\r\n      let temp = this.storageData.find((item) => {\r\n        return item.id == row.storage;\r\n      });\r\n\r\n      return temp && temp.name;\r\n    },\r\n    formatGoodstype(row) {\r\n      let temp = this.goodstypeData.find((item) => {\r\n        return item.id == row.goodstype;\r\n      });\r\n\r\n      return temp && temp.name;\r\n    },\r\n    resetForm() {\r\n      this.$refs.form.resetFields();\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageNum = 1;\r\n      this.pageSize = val;\r\n      this.loadPost();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.pageNum = val;\r\n      this.loadPost();\r\n    },\r\n    resetParam() {\r\n      this.name = \"\";\r\n      this.storage = \"\";\r\n      this.goodstype = \"\";\r\n    },\r\n    loadStorage() {\r\n      this.$axios\r\n        .get(this.$httpUrl + \"/storage/list\")\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.storageData = res.data;\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    loadGoodstype() {\r\n      this.$axios\r\n        .get(this.$httpUrl + \"/goodstype/list\")\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.goodstypeData = res.data;\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    loadPost() {\r\n      this.$axios\r\n        .post(this.$httpUrl + \"/record/listPage\", {\r\n          pageSize: this.pageSize,\r\n          pageNum: this.pageNum,\r\n          param: {\r\n            name: this.name,\r\n            goodstype: this.goodstype + \"\",\r\n            storage: this.storage + \"\",\r\n            roleId: this.user.roleId + \"\",\r\n            userId: this.user.id + \"\",\r\n          },\r\n        })\r\n        .then((res) => res.data)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code == 200) {\r\n            this.tableData = res.data;\r\n            this.total = res.total;\r\n            this.createChart();\r\n          } else {\r\n            alert(\"获取数据失败\");\r\n          }\r\n        });\r\n    },\r\n    createChart() {\r\n      if (!this.chartIn) {\r\n        this.chartIn = echarts.init(document.getElementById('chart-in'));\r\n      }\r\n      if (!this.chartOut) {\r\n        this.chartOut = echarts.init(document.getElementById('chart-out'));\r\n      }\r\n\r\n      const dataIn = {};\r\n      const dataOut = {};\r\n      this.tableData.forEach(item => {\r\n        if (item.count > 0) {\r\n          if (!dataIn[item.goodsname]) {\r\n            dataIn[item.goodsname] = 0;\r\n          }else{}\r\n          dataIn[item.goodsname] += item.count;\r\n        } else {\r\n          if (!dataOut[item.goodsname]) {\r\n            dataOut[item.goodsname] = 0;\r\n          }\r\n          dataOut[item.goodsname] += Math.abs(item.count);\r\n        }\r\n      });\r\n\r\n      const chartDataIn = Object.keys(dataIn).map(key => ({\r\n        name: key,\r\n        value: dataIn[key]\r\n      }));\r\n      const chartDataOut = Object.keys(dataOut).map(key => ({\r\n        name: key,\r\n        value: dataOut[key]\r\n      }));\r\n\r\n      const optionIn = {\r\n        title: {\r\n          text: '入库',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left'\r\n        },\r\n        series: [\r\n          {\r\n            name: '入库数量',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartDataIn,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n\r\n      const optionOut = {\r\n        title: {\r\n          text: '出库',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left'\r\n        },\r\n        series: [\r\n          {\r\n            name: '出库数量',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartDataOut,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n\r\n      this.chartIn.setOption(optionIn);\r\n      this.chartOut.setOption(optionOut);\r\n    }\r\n  },\r\n  beforeMount() {\r\n    this.loadStorage();\r\n    this.loadGoodstype();\r\n    this.loadPost();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.table {\r\n   max-height: 320px; \r\n   overflow-y: auto;\r\n   &::-webkit-scrollbar {\r\n    width: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: rgba(0, 0, 0, 0.1); \r\n    border-radius: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n.record-page {\r\n  overflow: auto;\r\n  height: 610px;\r\n  &::-webkit-scrollbar {\r\n    width: 0; \r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: rgba(0, 0, 0, 0.1); \r\n    border-radius: 5px; \r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n.chart-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 50px;\r\n  margin-left: 5%;\r\n}\r\n</style>"]}]}