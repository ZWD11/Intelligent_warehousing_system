{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=css&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\Login.vue","mtime":1719644851827},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1677927573745},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1677927577942},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1677927575422},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpodG1sLA0KYm9keSB7DQogICAgb3ZlcmZsb3cteDogaGlkZGVuOw0KfQ0KDQoubG9naW5Cb2R5IHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIGJhY2tncm91bmQ6IHVybCgiLi4vYXNzZXRzL2hvbWUucG5nIik7DQogICAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7DQoNCiAgICBvdmVyZmxvdy14OiBoaWRkZW47DQp9DQoubG9naW5EaXYgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDUwJTsNCiAgICBsZWZ0OiA1MCU7DQogICAgbWFyZ2luLXRvcDogLTIwMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMzIwcHg7DQogICAgd2lkdGg6IDY0MHB4Ow0KICAgIGhlaWdodDogMzMwcHg7DQogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICBib3JkZXItcmFkaXVzOiA1JTsNCiAgICBvcGFjaXR5OiAwLjk7DQp9DQogLmxvZ2luLWxlZnQgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICAgIHdpZHRoOiAzMDBweDsNCiAgICBoZWlnaHQ6IDMyOHB4Ow0KICAgIGZsZXgtZ3JvdzogMTsNCiB9DQogLndlbGNvbWVJbWFnIHsNCiAgICBoZWlnaHQ6IDkxcHg7DQogICAgd2lkdGg6IDIzMXB4Ow0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBtYXJnaW46IDA7DQogfQ0KLmxlZnQtdGl0bGUgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgZmxleC1ncm93OiAzOw0KICAgIGNvbG9yOiAjMDAwMDAwOw0KfQ0KIC5sZWZ0LWJvdHRvbSB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMXB4Ow0KICAgIGZsZXgtZ3JvdzogMTsNCiAgICBjb2xvcjogIzAwMDAwMDsNCn0NCg0KLmxvZ2luLXRpdGxlIHsNCiAgICBtYXJnaW46IDIwcHggMDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoubG9naW4tY29udGVudCB7DQogICAgd2lkdGg6IDQwMHB4Ow0KICAgIGhlaWdodDogMjUwcHg7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMjVweDsNCiAgICBsZWZ0OiAyMzJweDsNCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAkPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"loginBody\">\r\n        <div class=\"loginDiv\">\r\n            <div class=\"login-left\">\r\n                <div class=\"left-title\">\r\n                    <img src=\"../assets/welcome.png\" alt=\"welcome\" class = \"welcomeImag\"/>\r\n                    <h2>文松管理系统</h2>\r\n                </div>\r\n                <div class=\"left-bottom\">\r\n                    <p>2024 © 文松出品</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"login-content\">\r\n                <el-row>\r\n                    <el-col style=\"text-align: center; padding: 25px 0 25px 0\">\r\n                        <i\r\n                            class=\"iconfont icon-r-building\"\r\n                            style=\"font-size: 36px\"\r\n                        ></i>\r\n                        <b style=\"font-size: 35px; font-family: 'Noto Sans', sans-serif; font-weight: 500;\"> 欢迎登录</b>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-form\r\n                    :model=\"loginForm\"\r\n                    label-width=\"100px\"\r\n                    :rules=\"rules\"\r\n                    ref=\"loginForm\"\r\n                >\r\n                    <el-form-item label=\"账号\" v-if=\"loginType === 'account'\" prop=\"no\">\r\n                        <el-input\r\n                            style=\"width: 200px\"\r\n                            type=\"text\"\r\n                            v-model=\"loginForm.no\"\r\n                            autocomplete=\"off\"\r\n                            placeholder=\"请输入账号\"\r\n                        ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码\" v-if=\"loginType === 'account'\" prop=\"password\">\r\n                        <el-input\r\n                            style=\"width: 200px\"\r\n                            type=\"password\"\r\n                            v-model=\"loginForm.password\"\r\n                            show-password\r\n                            autocomplete=\"off\"\r\n                            @keyup.enter.native=\"confirm\"\r\n                            placeholder=\"请输入密码\"\r\n                        ></el-input>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"手机号\" v-if=\"loginType === 'phone'\" prop=\"phone\">\r\n                        <el-input\r\n                            style=\"width: 200px\"\r\n                            type=\"text\"\r\n                            v-model=\"loginForm.phone\"\r\n                            autocomplete=\"off\"\r\n                            placeholder=\"请输入手机号\"\r\n                        ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"验证码\" v-if=\"loginType === 'phone'\" prop=\"code\">\r\n                        <el-row>\r\n                            <el-col :span=\"14\">\r\n                                <el-input\r\n                                    style=\"width: 150px\"\r\n                                    type=\"text\"\r\n                                    v-model=\"loginForm.code\"\r\n                                    autocomplete=\"off\"\r\n                                    placeholder=\"点击右侧获取\"\r\n                                ></el-input>\r\n                            </el-col>\r\n                            <el-col :span=\"10\">\r\n                                <el-button @click=\"sendCode\" style=\"margin-left: -26px\" :disabled=\"code_disabled\">{{ code_text }}</el-button>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </el-form-item>\r\n                    <el-form-item style=\"padding-left: 45px\">\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            @click=\"confirm\"\r\n                            :disabled=\"confirm_disabled\"\r\n                            style=\"font-size: 20px\"\r\n                        >\r\n                            登 录\r\n                        </el-button>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item style=\"text-align: center; margin-left: 130px\">\r\n                        <el-link @click=\"toggleLoginType\">{{ loginType === 'account' ? '使用手机号登录' : '使用账号密码登录' }}</el-link>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Login\",\r\n    data() {\r\n        return {\r\n            loginType: 'account', // 登录类型：'account' 或 'phone'\r\n            confirm_disabled: false, // 防止多次提交\r\n            code_disabled: false, // 验证码按钮是否禁用\r\n            code_text: '获取验证码',\r\n            loginForm: {\r\n                no: \"\",\r\n                password: \"\",\r\n                phone: \"\",\r\n                code: \"\"\r\n            },\r\n            rules: {\r\n                no: [\r\n                    { required: true, message: \"请输入账号\", trigger: \"blur\" }\r\n                ],\r\n                password: [\r\n                    { required: true, message: \"请输密码\", trigger: \"blur\" }\r\n                ],\r\n                phone: [\r\n                    { required: true, message: \"请输入手机号\", trigger: \"blur\" }\r\n                ],\r\n                code: [\r\n                    { required: true, message: \"请输入验证码\", trigger: \"blur\" }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        toggleLoginType() {\r\n            this.loginType = this.loginType === 'account' ? 'phone' : 'account';\r\n        },\r\n        sendCode() {\r\n            if (this.loginForm.phone === '') {\r\n                this.$message.error('请输入手机号');\r\n                return;\r\n            }\r\n            this.code_disabled = true;\r\n            this.code_text = '发送中...';\r\n            // 调用发送验证码的接口\r\n            this.$axios.post(this.$httpUrl + \"/user/sendCode\", { phone: this.loginForm.phone })\r\n                .then((res) => res.data)\r\n                .then((res) => {\r\n                    if (res.code == 200) {\r\n                        this.$message.success('验证码已发送');\r\n                        this.startCodeTimer();\r\n                    } else {\r\n                        this.$message.error('发送验证码失败');\r\n                        this.code_disabled = false;\r\n                        this.code_text = '获取验证码';\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    this.$message.error('发送验证码失败');\r\n                    this.code_disabled = false;\r\n                    this.code_text = '获取验证码';\r\n                });\r\n        },\r\n        startCodeTimer() {\r\n            let count = 60;\r\n            const timer = setInterval(() => {\r\n                if (count > 0) {\r\n                    this.code_text = `${count--}秒后重试`;\r\n                } else {\r\n                    clearInterval(timer);\r\n                    this.code_disabled = false;\r\n                    this.code_text = '获取验证码';\r\n                }\r\n            }, 1000);\r\n        },\r\n        confirm() {\r\n            this.confirm_disabled = true;\r\n            this.$refs.loginForm.validate((valid) => {\r\n                if (valid) {\r\n                    if (this.loginType === 'account') {\r\n                        this.loginWithPassword();\r\n                    } else {\r\n                        this.loginWithPhone();\r\n                    }\r\n                } else {\r\n                    this.confirm_disabled = false;\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        loginWithPassword() {\r\n            // 使用账号密码登录\r\n            this.$axios.post(this.$httpUrl + \"/user/login\", this.loginForm)\r\n                .then((res) => res.data)\r\n                .then((res) => {\r\n                    if (res.code == 200) {\r\n                        sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data.user));\r\n                        this.$store.commit(\"setMenu\", res.data.menu);\r\n                        this.$router.replace(\"/Index\");\r\n                    } else {\r\n                        this.confirm_disabled = false;\r\n                        this.$message.error(\"校验失败，用户名或密码错误！\");\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    this.confirm_disabled = false;\r\n                    this.showError(e);\r\n                });\r\n        },\r\n        loginWithPhone() {\r\n            // 使用手机号和验证码登录\r\n            this.$axios.post(this.$httpUrl + \"/user/loginWithCode\", this.loginForm)\r\n                .then((res) => res.data)\r\n                .then((res) => {\r\n                    if (res.code == 200) {\r\n                        sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data.user));\r\n                        this.$store.commit(\"setMenu\", res.data.menu);\r\n                        this.$router.replace(\"/Index\");\r\n                    } else {\r\n                        this.confirm_disabled = false;\r\n                        this.$message.error(\"校验失败，手机号或验证码错误！\");\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    this.confirm_disabled = false;\r\n                    this.showError(e);\r\n                });\r\n        },\r\n        showError(e) {\r\n            if (e.response == undefined || e.response.data == undefined) {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: e,\r\n                    type: \"error\",\r\n                    duration: 5000\r\n                });\r\n            } else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: e.response.data,\r\n                    type: \"error\",\r\n                    duration: 5000\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nhtml,\r\nbody {\r\n    overflow-x: hidden;\r\n}\r\n\r\n.loginBody {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: url(\"../assets/home.png\");\r\n    background-size: 100% 100%;\r\n\r\n    overflow-x: hidden;\r\n}\r\n.loginDiv {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin-top: -200px;\r\n    margin-left: -320px;\r\n    width: 640px;\r\n    height: 330px;\r\n    background: #ffffff;\r\n    border-radius: 5%;\r\n    opacity: 0.9;\r\n}\r\n .login-left {\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-size: cover;\r\n    width: 300px;\r\n    height: 328px;\r\n    flex-grow: 1;\r\n }\r\n .welcomeImag {\r\n    height: 91px;\r\n    width: 231px;\r\n    border: none;\r\n    margin: 0;\r\n }\r\n.left-title {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n    flex-grow: 3;\r\n    color: #000000;\r\n}\r\n .left-bottom {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 1px;\r\n    flex-grow: 1;\r\n    color: #000000;\r\n}\r\n\r\n.login-title {\r\n    margin: 20px 0;\r\n    text-align: center;\r\n}\r\n.login-content {\r\n    width: 400px;\r\n    height: 250px;\r\n    position: absolute;\r\n    top: 25px;\r\n    left: 232px;\r\n}\r\n</style>\r\n"]}]}