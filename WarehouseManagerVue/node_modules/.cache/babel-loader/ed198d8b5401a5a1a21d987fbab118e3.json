{"remainingRequest":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\babel-loader\\lib\\index.js!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\src\\components\\CurrentLocation.vue","mtime":1719904299799},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\babel.config.js","mtime":1677915063811},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1677927576192},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1677927572803},{"path":"D:\\java仓库管理\\java仓库管理\\仓库管理系统\\WarehouseManager\\源代码\\WarehouseManager\\WarehouseManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1677927577316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDdXJyZW50TG9jYXRpb24iLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgbG9jYXRpb246ICcnCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldEN1cnJlbnRMb2NhdGlvbigpIHsKICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgewogICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ocG9zaXRpb24gPT4gewogICAgICAgICAgY29uc3QgbGF0aXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7CiAgICAgICAgICBjb25zdCBsb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlOwogICAgICAgICAgdGhpcy5yZXZlcnNlR2VvY29kZShsYXRpdHVkZSwgbG9uZ2l0dWRlKTsKICAgICAgICB9LCBlcnJvciA9PiB7CiAgICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHsKICAgICAgICAgICAgY2FzZSBlcnJvci5QRVJNSVNTSU9OX0RFTklFRDoKICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+eUqOaIt+aLkue7neS6huWcsOeQhuS9jee9ruivt+axguOAgic7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIGVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFOgogICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn5L2N572u5L+h5oGv5LiN5Y+v55So44CCJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgZXJyb3IuVElNRU9VVDoKICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+ivt+axguiOt+WPlueUqOaIt+S9jee9rui2heaXtuOAgic7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAn6I635Y+W5L2N572u5L+h5oGv5pe25Y+R55Sf5pyq55+l6ZSZ6K+v44CCJzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+a1j+iniOWZqOS4jeaUr+aMgeWcsOeQhuS9jee9ruiOt+WPlic7CiAgICAgIH0KICAgIH0sCgogICAgcmV2ZXJzZUdlb2NvZGUobGF0aXR1ZGUsIGxvbmdpdHVkZSkgewogICAgICBjb25zdCBhcGlLZXkgPSAnYzVhODM3YzA3YzQ0NDFlYWIzNDNmM2JlMTIxMmYwNmEnOwogICAgICBjb25zdCBhcGlVcmwgPSBgaHR0cHM6Ly9hcGkub3BlbmNhZ2VkYXRhLmNvbS9nZW9jb2RlL3YxL2pzb24/cT0ke2xhdGl0dWRlfSske2xvbmdpdHVkZX0ma2V5PSR7YXBpS2V5fSZsYW5ndWFnZT16aC1DTmA7CiAgICAgIGF4aW9zLmdldChhcGlVcmwpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHM7CgogICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IHJlc3VsdHNbMF0uZm9ybWF0dGVkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+aXoOazleiOt+WPluW9k+WJjeS9jee9rueahOWfjuW4guS/oeaBr+OAgic7CiAgICAgICAgfQoKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJVc2VyTG9jYXRpb24iLCB0aGlzLmxvY2F0aW9uKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WPjeWQkeWcsOeQhue8lueggeWksei0pe+8micsIGVycm9yKTsKICAgICAgICB0aGlzLmxvY2F0aW9uID0gJ+iOt+WPluS9jee9ruS/oeaBr+Wksei0peOAgic7CiAgICAgIH0pOwogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAcA;AAEA;EACAA,uBADA;;EAEAC;IACA;MACAC,aADA;MAEAC;IAFA;EAIA,CAPA;;EAQAC;IACAC;MACA;QACAC,yCACAC;UACA;UACA;UACA;QACA,CALA,EAMAC;UACA;YACA;cACA;cACA;;YACA;cACA;cACA;;YACA;cACA;cACA;;YACA;cACA;cACA;UAZA;;UAcAC;QACA,CAtBA;MAwBA,CAzBA,MAyBA;QACA;MACA;IACA,CA9BA;;IA+BAC;MACA;MACA;MAEAC,kBACAC,IADA,CACAC;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;;QACAC;QACA;MACA,CAVA,EAWAC,KAXA,CAWAP;QACAC;QACA;MACA,CAdA;IAeA;;EAlDA,CARA;;EA4DAO;IACA;EACA;;AA9DA","names":["name","data","loading","location","methods","getCurrentLocation","navigator","position","error","console","reverseGeocode","axios","then","response","sessionStorage","catch","mounted"],"sourceRoot":"src/components","sources":["CurrentLocation.vue"],"sourcesContent":["<template>\r\n    <div style=\"line-height:1.75\">\r\n        <span>当前登录位置信息：\r\n            <template v-if=\"loading\">\r\n                加载中 <i class=\"el-icon-loading\"></i>\r\n            </template>\r\n            <template v-else>\r\n                <br>{{ location }}\r\n            </template>\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"CurrentLocation\",\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            location: ''\r\n        };\r\n    },\r\n    methods: {\r\n        getCurrentLocation() {\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position) => {\r\n                        const latitude = position.coords.latitude;\r\n                        const longitude = position.coords.longitude;\r\n                        this.reverseGeocode(latitude, longitude);\r\n                    },\r\n                    (error) => {\r\n                        switch (error.code) {\r\n                            case error.PERMISSION_DENIED:\r\n                                this.location = '用户拒绝了地理位置请求。';\r\n                                break;\r\n                            case error.POSITION_UNAVAILABLE:\r\n                                this.location = '位置信息不可用。';\r\n                                break;\r\n                            case error.TIMEOUT:\r\n                                this.location = '请求获取用户位置超时。';\r\n                                break;\r\n                            default:\r\n                                this.location = '获取位置信息时发生未知错误。';\r\n                                break;\r\n                        }\r\n                        console.error(error);\r\n                    }\r\n                );\r\n            } else {\r\n                this.location = '浏览器不支持地理位置获取';\r\n            }\r\n        },\r\n        reverseGeocode(latitude, longitude) {\r\n            const apiKey = 'c5a837c07c4441eab343f3be1212f06a'; \r\n            const apiUrl = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=${apiKey}&language=zh-CN`;\r\n\r\n            axios.get(apiUrl)\r\n                .then(response => {\r\n                    const results = response.data.results;\r\n                    if (results && results.length > 0) {\r\n                        this.location = results[0].formatted;\r\n                    } else {\r\n                        this.location = '无法获取当前位置的城市信息。';\r\n                    }\r\n                    sessionStorage.setItem(\"UserLocation\", this.location);\r\n                    this.loading = false;\r\n                })\r\n                .catch(error => {\r\n                    console.error('反向地理编码失败：', error);\r\n                    this.location = '获取位置信息失败。';\r\n                });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCurrentLocation();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nspan {\r\n    padding: 30px;\r\n    font-size: 25px;\r\n    color: orange;\r\n}\r\n</style>\r\n"]}]}